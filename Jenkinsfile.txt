pipeline {
    agent any
    
    environment {
        TOMCAT_HOME = 'C:\\Tomcat\\apache-tomcat-9.0.100'
        TOMCAT_PORT = '8081'
    }
    
    stages {
        stage('Checkout') {
            steps {
                // Clone the repository from GitHub
                git 'https://github.com/yourusername/recipes-blog.git'
            }
        }

        stage('Build') {
            steps {
                script {
                    // Use Gradle to package your application
                    sh '''#!/bin/bash
                        gradle clean build
                    '''
                }
            }
        }

        stage('Deploy to Tomcat') {
            steps {
                script {
                    // Deploy using the Deploy to Container Plugin (or manually using Gradle)
                    deploy adapters: [tomcat9(credentialsId: 'your-tomcat-credentials', path: '', url: "http://localhost:8081/manager/text")], contextPath: '', war: '**/*.war'
                }
            }
        }
    }
    
    post {
        success {
            echo 'Deployment completed successfully!'
        }
        failure {
            echo 'Deployment failed.'
        }
    }
}
