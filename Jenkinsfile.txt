pipeline {
    agent any

    environment {
        GRADLE_HOME = 'C:/Gradle/gradle-8.13'  // Update this path to your Gradle directory
        TOMCAT_HOME = 'C:/Tomcat/apache-tomcat-9.0.100'  // Update this path to your Tomcat directory
        TOMCAT_USERNAME = 'admin'  // Your Tomcat username
        TOMCAT_PASSWORD = 'admin123'  // Your Tomcat password
    }

    stages {
        stage('Checkout SCM') {
            steps {
                checkout scm
            }
        }
        
        stage('Build with Gradle') {
            steps {
                script {
                    // Use batch command to run Gradle on Windows
                    bat '"%GRADLE_HOME%/bin/gradle" build'
                }
            }
        }

        stage('Deploy to Tomcat') {
            steps {
                script {
                    // Define the location of the WAR file
                    def warFile = 'build/libs/gradle-war.war'  // WAR file generated by Gradle build

                    // Copy WAR file to Tomcat webapps directory
                    bat "copy ${warFile} %TOMCAT_HOME%/webapps/"

                    // Start Tomcat
                    bat "%TOMCAT_HOME%/bin/catalina.bat run"
                }
            }
        }
    }
    
    post {
        always {
            echo 'Pipeline finished'
        }
    }
}

             
       
